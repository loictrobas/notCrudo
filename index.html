<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>VotÃ¡ el Mejor Nombre</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin: 60px auto;
      max-width: 600px;
      background: #eee;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 40px;
    }
    form {
      display: inline;
    }
    button {
      padding: 20px 40px;
      margin: 20px;
      font-size: 1.5rem;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background-color: #333;
      color: white;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <h1>Â¿QuÃ© nombre te gusta mÃ¡s?</h1>

  <form id="form1" method="POST" target="hidden_iframe">
    <input type="hidden" name="name" id="name1">
    <button type="submit" id="option1"></button>
  </form>

  <form id="form2" method="POST" target="hidden_iframe">
    <input type="hidden" name="name" id="name2">
    <button type="submit" id="option2"></button>
  </form>

  <iframe name="hidden_iframe" style="display:none;"></iframe>

  <script>
    const names = [
      "Ã“xido", "Prensatto", "Extracto", "Bambino", "Rabioso",
      "AdÃ¡n y Evo", "Vizio", "Pecado", "Fiero", "Guapo",
      "Lungo", "Fango", "PÃ­caro", "Virgo", "Pichuso",
      "Preto", "Prieto", "Carozo", "Laminar", "Nativo",
      "Adagio", "Zeta", "Lento", "Gota", "Tronco", "Tempo"
    ];
  
    const endpoint = "https://script.google.com/macros/s/AKfycbwt5FIPEI6Lp9q0OCvElDnuO4Jdqd1WALuASuz3xXg3uApSzT8Z-H5FR_qt-A6ppZ2S/exec";
  
    function getRandomPair() {
      let a = Math.floor(Math.random() * names.length);
      let b;
      do {
        b = Math.floor(Math.random() * names.length);
      } while (a === b);
      return [names[a], names[b]];
    }
  
    function updateButtons() {
      const [name1, name2] = getRandomPair();
      const btn1 = document.getElementById("option1");
      const btn2 = document.getElementById("option2");
  
      btn1.textContent = name1;
      btn2.textContent = name2;
  
      btn1.onclick = () => sendVote(name1);
      btn2.onclick = () => sendVote(name2);
    }
  
    function sendVote(name) {
      console.log("Enviando voto por:", name);
      fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name: name }),
        credentials: "include" // <-- esto permite enviar cookies de Google
      })
      .then((res) => {
        if (!res.ok) throw new Error("Respuesta no OK");
        return res.text();
      })
      .then((text) => {
        console.log("Respuesta del script:", text);
        updateButtons();
      })
      .catch((err) => {
        alert("Hubo un error al votar ðŸ˜¢");
        console.error(err);
      });
    }
  
    updateButtons();
  </script>